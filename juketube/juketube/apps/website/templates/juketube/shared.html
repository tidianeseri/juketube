{% extends "juketube/base.html" %} 
{% load i18n %} 
{% block pagetitle %}JukeTube{% endblock %}
{% block slug %} Slug: <h2> {{playlist.slug}} </h2>{% endblock %}
{% block playlistname %} {{playlist}} {% endblock %}

{% block content %}
<div class="wrapper">
	<div class="dot-mask"></div>
	<div class="container">
		<div class="col-md-8">
			<div class="" id="youtube-player">
				<div id="ytapiplayer">You need Flash player 8+ and JavaScript
					enabled to view this video.</div>
			</div>
		</div>
		<div class="col-md-4">
			<div class="media" id="next-song">
				<div class="row video-element loadVideo" yt-id="{{ playlist.medias.all.0.media_id }}"">
					<div class="media-img  pull-left  col-sm-2  col-md-4">
						<div class="img-overlay ">
							<a
								class="btn  btn-primary  animated fadeInUp glyphicon glyphicon-play"
								href="#" rel="bookmark"></a>
						</div>
						<img src="http://img.youtube.com/vi/{{ playlist.medias.all.0.media_id }}/0.jpg" alt="About"
							width="150" height="150">
					</div>
					<div class="media-body   col-sm-10 col-md-8 loadVideo ">
						<h4 class="media-heading">
							<a href="#">Next Song</a>
						</h4>
						<p class="">{{ playlist.medias.all.0 }}</p>
					</div>
				</div>
			</div>

			<div id="playlist">
				<h1>Playlist</h1>
				<span id="clear-playlist" title="Clear Playlist"><span class="glyphicon glyphicon-remove"></span></span>

				<div id="table-playlist">
				
				{% for media in playlist.playlistmedia_set.all %}
					<div class="media">
						<div class="row video-element" yt-id="{{ media.media.media_id }}"
							yt-title="{{ media.media.name }}" yt-duration="undefined" jkt-id="{{  media.media.id }}" jkt-pos="{{  media.position }}">
							<div class="media-img  pull-left  col-sm-2 col-md-2 loadVideo ">
								<img src="http://img.youtube.com/vi/{{ media.media.media_id }}/0.jpg"
									alt="About" width="90" height="90">
							</div>
							<div class="media-body col-sm-8 col-md-8 loadVideo">
								<h4 class="media-heading">
									<a href="#">{{ media.media.name }}</a>
								</h4>
							</div>
							{% if is_listener %}
							<div class="col-md-2">
								<span class="glyphicon glyphicon-remove remVideo"></span>
							</div>
							{% endif %}
						</div>
					</div>
					{% endfor %}
 				
				</div>

			</div>

		</div>
	</div>
</div>

</div>

<div id="song-info">
	<div class="container">
		<h1>Song Info</h1>
		<div class="col-md-4">
			<h4>More Informations</h4>
			<div id="info-text"></div>
		</div>
		<div class="col-md-8">
			<h4>Lyrics</h4>
			<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.
				Aenean ut sapien et nibh auctor consequat quis id nulla. Curabitur
				sollicitudin tristique nunc, ornare pharetra magna mattis ac.
				Aliquam tortor nibh, pretium sit amet congue accumsan, suscipit vel
				velit. Duis sed urna eget mi rutrum dapibus. Mauris ut augue sed
				risus semper elementum ut sed justo.
		</div>
	</div>
</div>
{% if user.is_authenticated %}
<input type="hidden" id="idmedia" name="idmedia">
<input type="hidden" id="is_auth" name="is_auth">
<input type="hidden" id="playlist_id" name="playlist_id" value="{{playlist.id}}">
{% endif %}

{% endblock %}

{% block pagejs %}
<script type="text/javascript">
//player = new YoutubePlayer("ytapiplayer");
	var tag = document.createElement('script');

	tag.src = "https://www.youtube.com/iframe_api";
	var firstScriptTag = document.getElementsByTagName('script')[0];
	firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
	
	var ytplayer;
	function onYouTubeIframeAPIReady() {
	  ytplayer = new YT.Player('ytapiplayer', {
	    height: '100%',
	    width: '100%',
	    //videoId: 'T0BlXy3Roj4',
	    playerVars: {
	    	'controls': '0',
	    	'modestbranding': '1',
	    	'showinfo': '0',
	    	'autoplay': '0'
	       },
    	events: {
            'onReady': onYouTubePlayerReady,
            'onStateChange': onytplayerStateChange
          }
	  });
	}
	  function loadVideoPage() {
		  data = new Object();
		  {% for media in playlist.playlistmedia_set.all %}
			data.id = "{{ media.media.media_id }}";
			data.title = "{{ media.media.name }}";
			tr1 = new MediaYoutube(data);
			YT_PLAYLIST.add(tr1, false);
		  {% endfor %}
			/*YT_PLAYLIST.add(tr1);
			YT_PLAYLIST.add(tr2);
			YT_PLAYLIST.add(tr3);
			YT_PLAYLIST.add(tr4);*/
		}
</script>
{% endblock %}